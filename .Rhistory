v1total = merge(visit1,v1trhtn, by = "subjid")
visit2 <- read.csv(file = paste(dir_data, "analysis2.csv",sep = ""), header=T,sep=",")
v2trhtn = read.sas7bdat(paste(save2_dir, "trhtn_v2.sas7bdat", sep=""))
v2total = merge(visit2,v2trhtn, by = "subjid")
visit3 <- read.csv(file = paste(dir_data, "analysis3.csv",sep = ""), header=T,sep=",")
v3trhtn = read.sas7bdat(paste(save3_dir, "trhtn_v3.sas7bdat", sep=""))
v3total = merge(visit3,v3trhtn, by = "subjid")
common_cols <- intersect(colnames(v1total), colnames(v2total))
common_cols <- intersect(colnames(v3total), common_cols)
totrbind = rbind(v1total[,common_cols],v2total[,common_cols],v3total[,common_cols])
table(totrbind$eGFRmdrd)
table(totrbind$eGFRmdrd)
totrbind$eGFRcat[which(totrbind$eGFRckdepi > 90)]  = "Stage 1:Normal"
View(totrbind)
totrbind[which(totrbind$eGFRckdepi > 90),111]  = "Stage 1:Normal"
colnames(totrbind)[111] = "eGFRCat"
table(totrbind$eGFRCat)
totrbind[which(totrbind$eGFRckdepi >= 90),111]  = "Stage 1:Normal"
table(totrbind$eGFRCat)
totrbind[which(totrbind$eGFRckdepi >= 60 & totrbind$eGFRckdepi < 90 ),111]  = "Stage 2:Mild CKD"
table(totrbind$eGFRCat)
totrbind[which(totrbind$eGFRckdepi >= 90),111]  = "Stage 1:Normal"
colnames(totrbind)[111] = "eGFRCat"
totrbind[which(totrbind$eGFRckdepi >= 60 & totrbind$eGFRckdepi < 90 ),111]  = "Stage 2:Mild CKD"
totrbind[which(totrbind$eGFRckdepi >= 30 & totrbind$eGFRckdepi < 60 ),111]  = "Stage 3:Moderate CKD"
totrbind[which(totrbind$eGFRckdepi >= 15 & totrbind$eGFRckdepi < 30 ),111]  = "Stage 4:Severe CKD"
totrbind[which(totrbind$eGFRckdepi < 15 ),111]  = "Stage 5:End Stage CKD"
table(totrbind$eGFRCat)
varsToFactor <- c("sex","BPjnc7","hdl3cat","ldl5cat", "CHDHx", "CVDHx", "MIHx","prevatrh","uncontrolledbp","Diabetes", "eGFRCat")
totrbind[varsToFactor] <- lapply(totrbind[varsToFactor], factor)
vars <- c("age","sex","sbp","dbp","BPjnc7","eGFRckdepi","eGFRCat","HSCRP", "hdl","hdl3cat","ldl","ldl5cat","CHDHx","CVDHx","MIHx","prevatrh","uncontrolledbp","Diabetes","BMI","waist")
dput(names(totrbind))
tableOne <- CreateTableOne(vars = vars, data = totrbind, strata = "visit")
tableOne
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
save1_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/"
save2_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit2/"
save3_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit3/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
v1trhtn = read.sas7bdat(paste(save1_dir, "trhtn_v1.sas7bdat", sep=""))
v1total = merge(visit1,v1trhtn, by = "subjid")
visit2 <- read.csv(file = paste(dir_data, "analysis2.csv",sep = ""), header=T,sep=",")
v2trhtn = read.sas7bdat(paste(save2_dir, "trhtn_v2.sas7bdat", sep=""))
v2total = merge(visit2,v2trhtn, by = "subjid")
visit3 <- read.csv(file = paste(dir_data, "analysis3.csv",sep = ""), header=T,sep=",")
v3trhtn = read.sas7bdat(paste(save3_dir, "trhtn_v3.sas7bdat", sep=""))
v3total = merge(visit3,v3trhtn, by = "subjid")
common_cols <- intersect(colnames(v1total), colnames(v2total))
common_cols <- intersect(colnames(v3total), common_cols)
totrbind = rbind(v1total[,common_cols],v2total[,common_cols],v3total[,common_cols])
totrbind$eGFRCat = "Missing"
totrbind[which(totrbind$eGFRckdepi >= 90),111]  = "Stage 1:Normal"
totrbind[which(totrbind$eGFRckdepi >= 60 & totrbind$eGFRckdepi < 90 ),111]  = "Stage 2:Mild CKD"
totrbind[which(totrbind$eGFRckdepi >= 30 & totrbind$eGFRckdepi < 60 ),111]  = "Stage 3:Moderate CKD"
totrbind[which(totrbind$eGFRckdepi >= 15 & totrbind$eGFRckdepi < 30 ),111]  = "Stage 4:Severe CKD"
totrbind[which(totrbind$eGFRckdepi < 15 ),111]  = "Stage 5:End Stage CKD"
table(totrbind$eGFRCat)
varsToFactor <- c("sex","BPjnc7","hdl3cat","ldl5cat", "CHDHx", "CVDHx", "MIHx","prevatrh","uncontrolledbp","Diabetes", "eGFRCat")
totrbind[varsToFactor] <- lapply(totrbind[varsToFactor], factor)
vars <- c("age","sex","sbp","dbp","BPjnc7","eGFRckdepi","eGFRCat","HSCRP", "hdl","hdl3cat","ldl","ldl5cat","CHDHx","CVDHx","MIHx","prevatrh","uncontrolledbp","Diabetes","BMI","waist")
dput(names(totrbind))
tableOne <- CreateTableOne(vars = vars, data = totrbind, strata = "visit")
tableOne
file.out <- paste (dir_data,"jhstabone.csv",sep ="" )
write.csv(print(tableOne,noSpaces=T),file.out)
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
save1_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/"
save2_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit2/"
save3_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit3/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
v1trhtn = read.sas7bdat(paste(save1_dir, "trhtn_v1.sas7bdat", sep=""))
v1total = merge(visit1,v1trhtn, by = "subjid")
View(visit1)
dir_topmed = "C:/Users/litkowse/Desktop/"
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
save1_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.xls", sep = ""), header = T, sep = "\t")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.xls", sep = ""), header = T)
topmed <- fread(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.xls", sep = ""), header = T)
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
View(topmed)
jhstop = visit1[which(visit1$subjid == topmed$SUBJID),]
View(topmed)
View(topmed)
typeof(topmed$SUBJID)
typeof(visit1$subjid)
which(visit1$subjid == topmed$SUBJID)
View(topmed)
jhstop = merge(topmed, visit1, by.x = SUBJID, by.y = subjid)
View(topmed)
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
View(jhstop)
View(jhstop)
View(jhstop)
rm(list=ls())
library(tableone)
#library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
save1_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
varsToFactor <- c("sex","currentSmoker")
totrbind[varsToFactor] <- lapply(totrbind[varsToFactor], factor)
vars <- c("age","sex","currentSmoker")
dput(names(totrbind))
varsToFactor <- c("sex","currentSmoker")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV1 < 0.70)] = 1
table(jhstop$copd)
plot(jhstop$FEV1)
hist(jhstop$FEV1)
hist(jhstop$FEV1PP)
hist(jhstop$FVCPP)
hist(jhstop$FEV1PP)
jhstop$copd[which(jhstop$FEV1PP < 70)] = 1
table(jhstop$copd)
varsToFactor <- c("sex","currentSmoker", "copd")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker","copd")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
chdev = read.csv(file = paste(event_dir, "incevtchd.csv",sep = ""), header=T,sep=",")
event_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Events/1-data/CSV/"
chdev = read.csv(file = paste(event_dir, "incevtchd.csv",sep = ""), header=T,sep=",")
View(chdev)
table(jhstop$SMK3cat)
table(jhstop$idealHealthSMK)
table(jhstop$everSmoker)
visit3 <- read.csv(file = paste(dir_data, "analysis3.csv",sep = ""), header=T,sep=",")
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
save1_dir = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV1PP < 70)] = 1
varsToFactor <- c("sex","currentSmoker","everSmoker", "copd", "SMK3Cat")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker","everSmoker", "copd", "SMK3Cat")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
varsToFactor <- c("sex","currentSmoker","everSmoker", "copd", "SMK3cat")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker","everSmoker", "copd", "SMK3cat")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
file.out <- paste (dir_topmed,"jhstopmed.csv",sep ="" )
write.csv(print(tableOne,noSpaces=T),file.out)
library(sas7bdat)
fea_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/"
smoke = read.sas7bdat(paste(fea_data, "afea.sas7bdat", sep=""))
fea_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AFU/1-data/"
smoke = read.sas7bdat(paste(fea_data, "afea.sas7bdat", sep=""))
View(smoke)
View(smoke)
rm(list=ls())
library(tableone)
#library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula <- read.csv(file = paste(extra_dat, "pula.csv", sep = ""),header = T)
toba <- read.csv(file = paste(extra_dat, "toba.csv", sep = ""),header = T)
View(pula)
pulasmall = pula[,c(1,47)]
View(pulasmall)
colnames(pulasmall) = c("subjid","FEV1Per")
View(pulasmall)
View(toba)
View(toba)
View(toba)
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
View(pula)
pulasmall = pula[,c(1,47)]
View(pulasmall)
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
tobasmall = tobal[,c(1,5,6,9)]
tobasmall = toba[,c(1,5,6,9)]
View(tobasmall)
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
pulasmall = pula[,c(1,47)]
tobasmall = toba[,c(1,5,6,9)]
View(pulasmall)
colnames(tobasmall) = c("subjid","AgeFirstSmoke","CurrSmoker","CigPerDay")
View(tobasmall)
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
View(jhstop)
jhstop = merge(jhstop, pulasmall, by.x = "SUBJID", by.y = "subjid")
View(jhstop)
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV01PP < 70)] = 1
View(jhstop)
jhstop = merge(jhstop, tobsmall, by.x = "SUBJID", by.y = "subjid")
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
View(jhstop)
jhstop$smokeyrs = jhstop$age - jhstop$AgeFirstSmoke
hist(jhstop$smokeyrs)
jhstop$smokyrs = 0
hist(jhstop$smokeyrs)
jhstop$smokyrs = 0
jhstop$smokeyrs = 0
hist(jhstop$smokeyrs)
table(jhstop$CurrSmoker)
table(jhstop$currentSmoker)
View(toba)
jhstop$smokeyrs[which(jhstop$CurrSmoker) == "Yes"] = jhstop$age - jhstop$AgeFirstSmoke
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age - jhstop$AgeFirstSmoke
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
hist(jhstop$smokeyrs)
jhstop$cigPerYr = jhstop$CigPerDay*365
hist(jhs$cigperday)
hist(jhstop$CigPerDay)
hist(jhstop$cigPerYr)
jhstop$packyrs = jhstop$cigPerYr/20
jhstop$ciglife = jhstop$cigPerYr*jhstop$smokeyrs
jhstop$ciglife = jhstop$cigPerYr*jhstop$smokeyrs
jhstop$packyrs = jhstop$ciglife/20
hist(jhstop$packyrs)
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
jhstop$packyrs = jhstop$CigPerDay/20*jhstop$smokeyrs
hist(jhstop$packyrs)
firstsmoke = jhstop[is.na(jhstop$AgeFirstSmoke)]
firstsmoke = jhstop[is.na(jhstop$AgeFirstSmoke),]
Numcurrsmoke = jhstop[is.na(jhstop$CurrSmoker)]
Numcurrsmoke = jhstop[is.na(jhstop$CurrSmoker),]
NumCurrentSMoke = jhstop[is.na(jhstop$currentSmoker),]
View(NumCurrentSMoke)
hist(jhstop$AgeFirstSmoke)
View(toba)
table(toba$X3..Do.you.now.smoke.cigarettes)
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
pulasmall = pula[,c(1,47)]
tobasmall = toba[,c(1,5,6,9)]
colnames(tobasmall) = c("subjid","AgeFirstSmoke","CurrSmoker","CigPerDay")
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
jhstop = merge(jhstop, pulasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV01PP < 70)] = 1
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$smokeyrs = 0
table(jhstop$CurrSmoker)
table(jhstop$currentSmoker)
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
jhstop$packyrs = jhstop$CigPerDay/20*jhstop$smokeyrs
hist(jhstop$packyrs)
varsToFactor <- c("sex","currentSmoker", "copd")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker", "copd", "packyrs")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
hist(jhstop$CigPerDay)
jhstop$packyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$CigPerDay[which(jhstop$CurrSmoker == "Yes")]/20*jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")]
hist(jhstop$packyrs)
varsToFactor <- c("sex","currentSmoker", "copd")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker", "copd", "packyrs")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
pulasmall = pula[,c(1,47)]
tobasmall = toba[,c(1,5,6,9)]
colnames(tobasmall) = c("subjid","AgeFirstSmoke","CurrSmoker","CigPerDay")
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
jhstop = merge(jhstop, pulasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV01PP < 70)] = 1
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
rm(list=ls())
library(tableone)
library(sas7bdat)
# Create Table One for Jackson Heart Study grant
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
pulasmall = pula[,c(1,47)]
tobasmall = toba[,c(1,5,6,9)]
colnames(tobasmall) = c("subjid","AgeFirstSmoke","CurrSmoker","CigPerDay")
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
jhstop = merge(jhstop, pulasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV01PP < 70)] = 1
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$smokeyrs = 0
table(jhstop$CurrSmoker)
table(jhstop$currentSmoker)
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
jhstop$packyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$CigPerDay[which(jhstop$CurrSmoker == "Yes")]/20*jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")]
hist(jhstop$packyrs)
varsToFactor <- c("sex","currentSmoker", "copd")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker", "copd", "packyrs")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
jhstop$packyrs)
hist(jhstop$packyrs)
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
pulasmall = pula[,c(1,47)]
tobasmall = toba[,c(1,5,6,9)]
colnames(tobasmall) = c("subjid","AgeFirstSmoke","CurrSmoker","CigPerDay")
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
jhstop = merge(jhstop, pulasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV01PP < 70)] = 1
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
jhstop$packyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$CigPerDay[which(jhstop$CurrSmoker == "Yes")]/20*jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")]
hist(jhstop$packyrs)
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
jhstop$packyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$CigPerDay[which(jhstop$CurrSmoker == "Yes")]/20*jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")]
hist(jhstop$packyrs)
jhstop$packyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$CigPerDay[which(jhstop$CurrSmoker == "Yes")]/20*jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")]
View(jhstop)
View(jhstop)
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
pulasmall = pula[,c(1,47)]
tobasmall = toba[,c(1,5,6,9)]
colnames(tobasmall) = c("subjid","AgeFirstSmoke","CurrSmoker","CigPerDay")
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
jhstop = merge(jhstop, pulasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV01PP < 70)] = 1
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$smokeyrs = 0
View(jhstop)
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
jhstop$packyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$CigPerDay[which(jhstop$CurrSmoker == "Yes")]/20*jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")]
hist(jhstop$smokeyrs)
jhstop$packyrs = jhstop$CigPerDay/20*jhstop$smokeyrs
hist(jhstop$packyrs)
hist(jhstop$smokeyrs)
varsToFactor <- c("sex","currentSmoker", "copd", "CurrSmoker")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker", "copd", "CurrSmoker","packyrs")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
file.out <- paste (dir_topmed,"jhstopmed.csv",sep ="" )
write.csv(print(tableOne,noSpaces=T),file.out)
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
pulasmall = pula[,c(1,47)]
tobasmall = toba[,c(1,5,6,9)]
colnames(tobasmall) = c("subjid","AgeFirstSmoke","CurrSmoker","CigPerDay")
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
jhstop = merge(jhstop, pulasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV01PP < 70)] = 1
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$smokeyrs = 0
jhstop$packyrs = 0
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
jhstop$packyrs = jhstop$CigPerDay/20*jhstop$smokeyrs
hist(jhstop$packyrs)
hist(jhstop$smokeyrs)
varsToFactor <- c("sex","currentSmoker", "copd", "CurrSmoker")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker", "copd", "CurrSmoker","packyrs")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
file.out <- paste (dir_topmed,"jhstopmed.csv",sep ="" )
write.csv(print(tableOne,noSpaces=T),file.out)
# Create Table One for Jackson Heart Study grant
rm(list=ls())
library(tableone)
library(sas7bdat)
dir_data = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/AnalysisData/1-data/CSV/"
extra_dat = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/"
extra_csv = "C:/Users/litkowse/Desktop/Vanguard_2016/Vanguard_2016/data/Visit1/1-data/CSV/"
dir_topmed = "C:/Users/litkowse/Desktop/"
visit1 <- read.csv(file = paste(dir_data, "analysis1.csv",sep = ""), header=T,sep=",")
topmed <- read.csv(file = paste(dir_topmed, "JHS_TOPMed_PostQCList_05June2017.csv", sep = ""), header = T)
pula = read.sas7bdat(paste(extra_dat, "pula.sas7bdat", sep=""))
toba <- read.csv(file = paste(extra_csv, "toba.csv", sep = ""),header = T)
pulasmall = pula[,c(1,47)]
tobasmall = toba[,c(1,5,6,9)]
colnames(tobasmall) = c("subjid","AgeFirstSmoke","CurrSmoker","CigPerDay")
jhstop = merge(topmed, visit1, by.x = "SUBJID", by.y = "subjid")
jhstop = merge(jhstop, pulasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$copd = 0
jhstop$copd[which(jhstop$FEV01PP < 70)] = 1
jhstop = merge(jhstop, tobasmall, by.x = "SUBJID", by.y = "subjid")
jhstop$smokeyrs = 0
jhstop$packyrs = 0
jhstop$smokeyrs[which(jhstop$CurrentSmoker == "Yes")] = jhstop$age[which(jhstop$CurrentSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrentSmoker == "Yes")]
jhstop$packyrs = jhstop$CigPerDay/20*jhstop$smokeyrs
hist(jhstop$packyrs)
hist(jhstop$smokeyrs)
varsToFactor <- c("sex","currentSmoker", "copd")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker", "copd","packyrs")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
hist(jhstop$smokeyrs)
jhstop$smokeyrs[which(jhstop$CurrentSmoker == "Yes")] = jhstop$age[which(jhstop$CurrentSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrentSmoker == "Yes")]
hist(jhstop$smokeyrs)
jhstop$smokeyrs[which(jhstop$CurrSmoker == "Yes")] = jhstop$age[which(jhstop$CurrSmoker == "Yes")] - jhstop$AgeFirstSmoke[which(jhstop$CurrSmoker == "Yes")]
hist(jhstop$smokeyrs)
jhstop$packyrs = jhstop$CigPerDay/20*jhstop$smokeyrs
hist(jhstop$packyrs)
varsToFactor <- c("sex","currentSmoker", "copd")
jhstop[varsToFactor] <- lapply(jhstop[varsToFactor], factor)
vars <- c("age","sex","currentSmoker", "copd","packyrs")
dput(names(jhstop))
tableOne <- CreateTableOne(vars = vars, data = jhstop)
tableOne
file.out <- paste (dir_topmed,"jhstopmed.csv",sep ="" )
write.csv(print(tableOne,noSpaces=T),file.out)
